# Пайплайн расчёта характеристик пассажиров титаника


Расчёт характеристик соответствующих каждому полу пассажиров титаника:
* процент выживаемости
* средний возраст


<img src="pipeline.png">

## Модуль состоит из последовательного выполнения следующих шагов:
* **Processing** (Предобработка данных датасета "Титаник"):

    С данными из датасета "Титаник" производятся следующие операции:
    * Для каждого класса билетов вычисляется средний возраст пассажиров, купивших билет
    * Если возраст пассажира не указан, то он заменяется средним возрастом пассажиров, 
    купивших билет такого же класса (с округлением до целого)

    *Исходные таблицы:*

	* input_table_1 (edw_db.titanic_table) (Данные пассажиров титаника)

    *Выходные таблицы:*

	* out_table_1 (Обработанные данные пассажиров титаника)

* **CalcStats** (Вычисление статистик по пассажирам Титаника):

    Данные таблицы `out_table_1` группируются по полу пассажира и вычисляются следующие статистики:
    * процент выживаемости
    * средний возраст

    *Исходные таблицы:*

	* out_table_1 (Результат вычислений шага Processing) (Обработанные данные пассажиров титаника)

    *Выходные таблицы:*

	* out_table_2 (Статистики пассажиров титаника)


## Результатом выполнения алгоритма являются следующие таблицы:
* out_table_2 (Результат вычислений шага CalcStats) (Финальная таблица):

<table>
  <thead>
  <tr>
    <th>Название колонки</th><th>Формат</th><th>Описание</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>sex</td><td>string</td><td>Пол</td>
  </tr>
  <tr>
    <td>avg_age</td><td>double</td><td></td>
  </tr>
  <tr>
    <td>survival_percentage</td><td>double</td><td>Процент выживших</td>
  </tr>
  </tbody>
</table>


